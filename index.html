<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://cesiumjs.org/releases/1.77/Build/Cesium/Cesium.js"></script>
  <link href="https://cesiumjs.org/releases/1.77/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>
<body>
  <div id="cesiumContainer"></div>
  <script>
    // Get your token from https://cesium.com/ion/tokens
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiYWZkZjRjZi0wYWVlLTRmYmUtOWNkOC0zNGUyOGE4ZWM4YzIiLCJpZCI6Mzg1MCwic2NvcGVzIjpbImFzciIsImdjIl0sImlhdCI6MTUzOTA2MTIyOH0.Nu7vAd57CwhRNnAi3L8Q0CABXfkOlzhaVqfiRXK3i-c';
    const viewer = new Cesium.Viewer('cesiumContainer', {
      terrainProvider: Cesium.createWorldTerrain()
    });
    const camera = viewer.scene.camera; 
    
    // Get position of camera (in Cartesian3)
    const cameraPos = camera.positionCartographic;
    const cameraPosLat = 40.03883;
    const cameraPosLon = -75.59777;
    
    // Generate some random positions to place clouds around the camera position
    const size = 1; // 1.1132 km. Size of the square area (in degrees) that the clouds will be generated in (1 degrees = 111.32 km)
    const step = 0.1;
    const maxCloudAltitude = 7.6e3;
    const minCloudAltitude = 3e3;
    for(let i = -size/2; i < size/2 + step; i+=step) {
      for(let j=-size/2; j < size/2 + step; j+=step) {
        let latitude = cameraPosLat + i + Math.random() * step;
        let longitude = cameraPosLon + j + Math.random() * step;
        // Compute a random altitude between two altitudes which clouds typically appears
        let altitude = Math.floor(Math.random() * maxCloudAltitude) + minCloudAltitude;
        viewer.entities.add({
          position: Cesium.Cartesian3.fromDegrees(longitude, latitude, altitude),
          billboard: {
            //image: "https://cdn.glitch.com/adc0001d-18b0-4d7f-a1d5-acd92a31a93c%2Fnibonstratus_cloud_texture.png?v=1611981572115",
            image: './images/ellipsoid.png',
            sizeInMeters: true,
            scale: 2
          },
        });
      }
    }
    
    camera.setView({
        destination : new Cesium.Cartesian3(1223492.0847721598, -4727278.059257026, 4089499.895268888),
        orientation : {
            direction : new Cesium.Cartesian3(-0.2716278044959114, 0.5533620236116934, 0.7874063796090953),
            up : new Cesium.Cartesian3(0.2038711108083718, -0.7665148745155504, 0.6090086348518965),
        },
        duration : 3
    })
  </script>
</body>
</html>